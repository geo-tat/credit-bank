{"openapi":"3.0.1","info":{"title":"MS Deal","description":"Сортирует поступающую информацию, сохраняет в базу данных.Здесь осуществляется логика смены статуса заявки и кредита","contact":{"name":"Tatevosian Georgii"},"version":"1.0.0"},"servers":[{"url":"http://localhost:2042","description":"Generated server url"}],"tags":[{"name":"API Cообщения","description":"Формирование сообщения для МС Кредитное досье"},{"name":"API Сделка","description":"Расчет кредита и регистрация"}],"paths":{"/deal/statement":{"post":{"tags":["API Сделка"],"description":"Расчёт возможных условий кредита. Request - LoanStatementRequestDto, response - List<LoanOfferDto>","operationId":"createStatement","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoanStatementRequestDto"}}},"required":true},"responses":{"400":{"description":"Ошибки при валидации","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LoanOfferDto"}}}}}}}},"/deal/offer/select":{"post":{"tags":["API Сделка"],"description":"Выбор одного из предложений. Request LoanOfferDto, response void","operationId":"selectOffer","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoanOfferDto"}}},"required":true},"responses":{"400":{"description":"Ошибки при валидации","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос"}}}},"/deal/document/{statementId}/sign":{"post":{"tags":["API Cообщения"],"description":"Согласиe или отказ предложения банка о кредите","operationId":"signDocument","parameters":[{"name":"statementId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"isSigned","in":"query","required":true,"schema":{"type":"boolean"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос"}}}},"/deal/document/{statementId}/send":{"post":{"tags":["API Cообщения"],"description":"Формирование пакета документов для клиента","operationId":"sendDocument","parameters":[{"name":"statementId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос"}}}},"/deal/document/{statementId}/code":{"post":{"tags":["API Cообщения"],"description":"Верификация проверочного кода","operationId":"sesCode","parameters":[{"name":"statementId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос"}}}},"/deal/calculate/{statementId}":{"post":{"tags":["API Сделка"],"description":"Завершение регистрации + полный подсчёт кредита.Request - FinishRegistrationRequestDto, param - String, response void.","operationId":"finishRegistration","parameters":[{"name":"statementId","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinishRegistrationRequestDto"}}},"required":true},"responses":{"400":{"description":"Ошибки при валидации","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос"}}}},"/deal/admin/{clientId}/statement":{"get":{"tags":["API Aдминистрированиe"],"description":"Получение списка всех заявлений конкретного клиента. Request , response Page<Statement>","operationId":"getAllStatementsByClientId","parameters":[{"name":"clientId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Клиент не найден","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageStatement"}}}}}}},"/deal/admin/statement":{"get":{"tags":["API Aдминистрированиe"],"description":"Получение списка всех заявлений. Request , response Page<Statement>","operationId":"getAllStatements","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageStatement"}}}}}}},"/deal/admin/statement/{statementId}":{"get":{"tags":["API Aдминистрированиe"],"description":"Поиск заявления по ID. Request UUID, response Statement","operationId":"getStatementById","parameters":[{"name":"statementId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Заявление не найдено","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Statement"}}}}}}},"/deal/admin/client":{"get":{"tags":["API Aдминистрированиe"],"description":"Получение списка всех клиентов. Request , response Page<Statement>","operationId":"getAllClients","parameters":[{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Успешный ответ на запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageClient"}}}}}}}},"components":{"schemas":{"ErrorResponse":{"type":"object","properties":{"exception":{"type":"string","description":"Тип исключения"},"sourceClass":{"type":"string","description":"Класс-источник исключения"},"message":{"type":"string","description":"Сообщение об ошибке"},"timestamp":{"type":"string","description":"Метка времени ошибки","format":"date-time"}},"description":"Ошибка ответа"},"LoanStatementRequestDto":{"type":"object","properties":{"firstName":{"maxLength":30,"minLength":2,"type":"string","description":"Имя"},"lastName":{"maxLength":30,"minLength":2,"type":"string","description":"Фамилия"},"middleName":{"maxLength":30,"minLength":2,"type":"string","description":"Отчество"},"amount":{"type":"number","description":"Сумма кредита, от 30000"},"term":{"type":"integer","description":"Срок кредита, от 6 месяцев","format":"int32"},"birthdate":{"type":"string","description":"Дата рождения","format":"date"},"email":{"type":"string","description":"Email адрес"},"passportSeries":{"type":"string","description":"Серия паспорта"},"passportNumber":{"type":"string","description":"Номер паспорта"}},"description":"Заявление на подбор кредита"},"LoanOfferDto":{"type":"object","properties":{"statementId":{"type":"string","description":"Идентификатор заявки","format":"uuid"},"requestedAmount":{"type":"number","description":"Запрашиваемая сумма кредита"},"totalAmount":{"type":"number","description":"Общая сумма кредита"},"term":{"type":"integer","description":"Срок кредита в месяцах","format":"int32"},"monthlyPayment":{"type":"number","description":"Ежемесячный платеж"},"rate":{"type":"number","description":"Процентная ставка"},"isInsuranceEnabled":{"type":"boolean","description":"Наличие страховки"},"isSalaryClient":{"type":"boolean","description":"Является зарплатным клиентом"}},"description":"Информация о возможном условии кредита"},"EmploymentDto":{"type":"object","properties":{"employmentStatus":{"type":"string","description":"Статус занятости заявителя","enum":["EMPLOYED","UNEMPLOYED","SELF_EMPLOYED","BUSINESS_OWNER","EMPLOYED","SELF_EMPLOYED","UNEMPLOYED","BUSINESS_OWNER"]},"employerINN":{"type":"string","description":"ИНН работодателя","example":"7707083893"},"salary":{"type":"number","description":"Ежемесячная зарплата заявителя","example":5000},"position":{"type":"string","description":"Должность заявителя","enum":["TOP_MANAGER","MID_MANAGER","WORKER","OWNER","TOP_MANAGER,\nMID_MANAGER,\nWORKER,\nOWNER"]},"workExperienceTotal":{"minimum":0,"type":"integer","description":"Общий опыт работы в месяцах","format":"int32"},"workExperienceCurrent":{"minimum":0,"type":"integer","description":"Текущий опыт работы в месяцах","format":"int32"}},"description":"Информация о занятости заявителя на кредит"},"FinishRegistrationRequestDto":{"type":"object","properties":{"gender":{"type":"string","description":"Пол","enum":["MALE","FEMALE","NON_BINARY","MALE","FEMALE"]},"maritalStatus":{"type":"string","description":"Семейное положение","enum":["SINGLE","MARRIED","WIDOW_WIDOVER","DIVORCED","SINGLE","MARRIED","WIDOW_WIDOWER","DIVORCED"]},"dependentAmount":{"type":"integer","description":"Количество иждивенцев","format":"int32"},"passportIssueDate":{"type":"string","description":"Дата выдачи паспорта","format":"date"},"passportIssueBranch":{"type":"string","description":"Кем выдан паспорт"},"employmentDto":{"$ref":"#/components/schemas/EmploymentDto"},"accountNumber":{"type":"string","description":"Номер счета"}},"description":"Заявление на окончательное оформление кредита"},"Pageable":{"type":"object","properties":{"page":{"minimum":0,"type":"integer","format":"int32"},"size":{"minimum":1,"type":"integer","format":"int32"},"sort":{"type":"array","items":{"type":"string"}}}},"Client":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"firstName":{"type":"string"},"lastName":{"type":"string"},"middleName":{"type":"string"},"birthDate":{"type":"string","format":"date"},"email":{"type":"string"},"gender":{"type":"string","enum":["MALE","FEMALE","NON_BINARY"]},"maritalStatus":{"type":"string","enum":["SINGLE","MARRIED","WIDOW_WIDOVER","DIVORCED"]},"dependentAmount":{"type":"integer","format":"int32"},"passportDtoData":{"$ref":"#/components/schemas/PassportDto"},"employmentData":{"$ref":"#/components/schemas/EmploymentDto"},"accountNumber":{"type":"string"}}},"Credit":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"amount":{"type":"number"},"term":{"type":"integer","format":"int32"},"monthlyPayment":{"type":"number"},"rate":{"type":"number"},"psk":{"type":"number"},"paymentSchedule":{"type":"array","items":{"$ref":"#/components/schemas/PaymentScheduleElementDto"}},"insuranceEnabled":{"type":"boolean"},"salaryClient":{"type":"boolean"},"creditStatus":{"type":"string","enum":["CALCULATED","ISSUED"]}}},"PageStatement":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/Statement"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"unpaged":{"type":"boolean"}}},"PassportDto":{"type":"object","properties":{"series":{"type":"string"},"number":{"type":"string"},"issueBranch":{"type":"string"},"issueDate":{"type":"string","format":"date"}}},"PaymentScheduleElementDto":{"type":"object","properties":{"number":{"type":"integer","format":"int32"},"date":{"type":"string","format":"date"},"totalPayment":{"type":"number"},"interestPayment":{"type":"number"},"debtPayment":{"type":"number"},"remainingDebt":{"type":"number"}}},"SortObject":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"Statement":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"client":{"$ref":"#/components/schemas/Client"},"credit":{"$ref":"#/components/schemas/Credit"},"applicationStatus":{"type":"string","enum":["PREAPPROVAL","APPROVED","CC_DENIED","CC_APPROVED","PREPARE_DOCUMENTS","CLIENT_DENIED","DOCUMENT_SIGNED","CREDIT_ISSUED"]},"creationDate":{"type":"string","format":"date-time"},"appliedOffer":{"$ref":"#/components/schemas/LoanOfferDto"},"signDate":{"type":"string","format":"date-time"},"sesCode":{"type":"string"},"statusHistory":{"type":"array","items":{"$ref":"#/components/schemas/StatementStatusHistoryDto"}}}},"StatementStatusHistoryDto":{"type":"object","properties":{"status":{"type":"string","enum":["PREAPPROVAL","APPROVED","CC_DENIED","CC_APPROVED","PREPARE_DOCUMENTS","CLIENT_DENIED","DOCUMENT_SIGNED","CREDIT_ISSUED"]},"time":{"type":"string","format":"date-time"},"changeType":{"type":"string","enum":["AUTOMATIC","MANUAL"]}}},"PageClient":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/Client"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"first":{"type":"boolean"},"last":{"type":"boolean"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}}}}}